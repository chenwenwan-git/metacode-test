<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>recruitment</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/recruitment.css">
    <link rel="stylesheet" href="css/sign.css">
    <link rel="stylesheet" href="css/searchCareerIndex.css">
    <link rel="stylesheet" href="css/careerinfo.css">
    <style>
        /* 字体声明 */
        @font-face {
            font-family: 'icomoon';
            src: url('fonts/icomoon.eot?hn1nga');
            src: url('fonts/icomoon.eot?hn1nga#iefix') format('embedded-opentype'),
                url('fonts/icomoon.ttf?hn1nga') format('truetype'),
                url('fonts/icomoon.woff?hn1nga') format('woff'),
                url('fonts/icomoon.svg?hn1nga#icomoon') format('svg');
            font-weight: normal;
            font-style: normal;
            font-display: block;
        }
    </style>
</head>

<body>
    <div id="app" class='contentall'>

        <!-- 头部导航栏 eg:bilibili项目-->
        <div class="suspension-box1 suspension-box">
            <div class="background-box">
                <div class="suspension-w">
                    <div class="nav">
                        <!-- 正常时不设置颜色，也不显示搜索框，下去的时候才显示 -->
                        <div class="logo">
                            <img src="images/logo.9460104.png" alt="">

                        </div>
                        <div class="tab-sign">
                            <div class="tab">
                                <div class="'test">
                                    <a href="" class="nav-animation active tab1" data-id="0">首页</a>

                                </div>
                                <div>
                                    <a href="" class="nav-animation tab2" data-id="1">热招职位</a>
                                </div>
                                <div>
                                    <a href="" class="nav-animation">校园招聘</a>
                                </div>
                            </div>
                            <div class="sign">
                                <div class="sign-box">
                                    <button class="sign-btn">登录</button>
                                    <div class="person-info" style="cursor: pointer;">
                                        <span style="font-family: 'icomoon';"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 搜索框 -->
                <div class="search-box">
                    <input type="text" placeholder="输入职位关键字">
                </div>
            </div>
        </div>

        <div class="main-content-box">
            <!-- banner图 -->
            <div class="banner">
                <div class="banner-box">
                    <img src="images/1.png" alt="">
                    <!-- 左侧箭头 -->
                    <a href="" class='prev'>&lt;</a>
                    <!-- 右侧箭头 -->
                    <a href="" class='next'>&gt;</a>
                    <!-- 底部条形部分 -->
                    <div class="bar recruitment-bar">
                        <!-- 默认第一个 -->
                        <span class="active-bar bar-animation" data-id="0"></span>
                        <span class="bar-animation" data-id="1"></span>
                    </div>
                </div>
            </div>
            <div class="hot">
                <!-- 热招职位 -->
                <div class="hot-career">
                    <p>热招职位</p>
                </div>

                <!-- 职业盒子 -->

                <div class="all-careers">
                    <div class="career-boxs">

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 登陆弹框部分 -->
    <div class="overlay">
        <div id="login-popup" class="popup">
            <div class="popup-content">
                <div class="top">
                    <ul class="login-tabs">
                        <li class="active" id="phone-login-tab">账号登录</li>
                    </ul>
                    <span class="close">&times;</span>
                </div>
                <div class="bottom">
                    <div class="login-form">
                        <div class="username">
                            <div class="input-group">
                                <input type="text" placeholder="请输入账号">
                            </div>
                        </div>

                        <div class="password-first password">
                            <div class="input-group">
                                <input type="text" placeholder="请输入密码">
                            </div>
                        </div>

                        <div class="password-vert password">
                            <div class="input-group">
                                <input type="text" placeholder="请再次输入密码">

                            </div>
                            <div class="error-box">
                                <div class="icon-box">
                                    <span class="icon"></span>
                                </div>
                                <span class="error-text">请输入正确的密码</span>
                            </div>
                        </div>
                    </div>



                    <button class="login-button" disabled="false">登录</button>
                    <div class="agreement">
                        <input type="checkbox">首次登录会自动创建新账号，且阅读并同意<a href="#">《隐私协议》</a>
                    </div>
                    <div class="other-login">其他登录方式</div>
                    <button class="wechat-login-button">
                        <span></span>
                        微信登录
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- 职位筛选类别后的列表页面 -->
    <div class="search-career-index">
        <div class="on-recruit-career">
            <div class="top">
                <span style="font-size: 20px;">在招职位</span>
                <div style="text-align: center;">
                    <span style="color:rgb(133, 137, 166)">分享</span>
                    <span style="font-family: 'icomoon';color:rgb(133, 137, 166);"></span>
                </div>
            </div>
            <div class="career-fliter">
                <div class="fliter-top-info">
                    <span style="font-size: 20px;">职位筛选</span>
                    <div style="display: flex;justify-content: center;align-items: center;">
                        <span class="fliter-condition-info" style="color:rgb(133, 137, 166)">已选 0 条件 | 0 结果 | 清除</span>
                        <div style=" width: 13px;
    height: 13px;
    border-radius: 9px;
    background-color: rgb(133, 137, 166);
    font-size: 5px;
    text-align: center;
    line-height: 13px;
    margin-left: 5px;
    
">
                            <span style="font-family: 'icomoon';color:white;"></span>
                        </div>
                    </div>
                </div>
                <div class="fliter-search">
                    <input type="text">
                    <button>搜索职位</button>
                </div>
                <div class="fliter-select">
                    <select name="" id="">

                        <option value="">职能类型</option>
                        <option value="xx">xx</option>
                    </select>
                    <select name="" id="">
                        <option value="">工作地点</option>
                        <option value="xx">xx</option>
                    </select>
                </div>
            </div>

            <div class="search-result-box">

            </div>

            <!-- 底部的页面切换 -->
            <div class="page-box">
                <div class="change-box">
                    <select name="" id="">
                        <option value="">30行/页</option>
                    </select>
                    <div class="current-page">
                        <span style="color: #ccc;">&lt;&nbsp;&nbsp; </span>
                        <span> 1 </span>
                        <span style="color: #ccc;">&nbsp;&nbsp;&gt; </span>
                    </div>
                    <div class="go-page">
                        <span>前往</span>
                        <input type="text">
                        <span>页</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="lastest-career"></div>
    </div>

    <!-- //职位详细界面 -->
    <div class="everyCareerinfobox">
        <div class="left">
            <a data-id="1" style="color:#989CB2;">首页</a>
            <span style="color:#989CB2;">&nbsp;/&nbsp;</span>
            <a data-id="2" style="color:#989CB2;">职位列表</a>
            <span style="color:#989CB2;">&nbsp;/&nbsp;</span>
            <a>职位详情</a>
        </div>
        <div class="middle">

        </div>


    </div>
    <!-- 底部 -->
    <div class="footer-box">
        <div class="footer-top">
            <img src="images/yue.915cae3.png" alt="">
            <div class="footer-top-text">
                <a href="https://beian.mps.gov.cn/#/query/webSearch">京公网安备 11010802024479号</a>
                <a href="https://beian.miit.gov.cn/">京ICP备15060035号-3</a>
            </div>

        </div>
        <div class="footer-bottom">
            <a href="https://www.mokahr.com/"></a>
        </div>
    </div>
    <!-- 触底返回的箭头 -->
    <div id="backTop" class="back-to-top">
        <i class="arrow-up"></i>
    </div>

    <script src='js/recruitment.js'></script>
    <script>
        // 判断是否已经登陆了
        if (localStorage.getItem('token')) {
            signBtn.style.display = 'none'
            personinfo.style.display = 'block'
        }

    </script>

    <script>
        // 实现底部箭头返回顶部的功能
        // 获取返回顶部按钮和页面内容元素

        const content = document.querySelector('.contentall');
        const backTop = document.querySelector('.back-to-top')


        // 判断是否到达底部
        window.addEventListener("scroll", function () {
            const n = document.documentElement.scrollTop

            if (window.scrollY + window.innerHeight >= content.offsetHeight - 100) {

                backTop.style.display = 'block';
            }
            else {
                backTop.style.display = 'none';
            }
        })
        backTop.addEventListener('click', function () {
            // 回滚顶部

            document.documentElement.scrollTop = 0
        })


    </script>
    <script>
        // 顶部的导航栏根据页面滚动判断是否显示搜索框
        const hotCareer = document.querySelector('.hot-career')
        const header = document.querySelector('.suspension-box1')
        const MainContent = document.querySelector('.main-content-box')
        const searchBox = document.querySelector('.search-box')

        window.addEventListener('scroll', function () {
            const n = document.documentElement.scrollTop
            if (n >= hotCareer.getBoundingClientRect().top && MainContent.style.display !== 'none') {
                header.style.backgroundColor = '#DD4646';
                searchBox.style.display = 'flex'

            } else {
                header.style.backgroundColor = 'transparent';
                searchBox.style.display = 'none'
            }
        })
    </script>
    <script>
        // 登陆按钮点击之后弹出登陆框
        // 获取登录按钮、遮罩层和关闭按钮的元素
        const loginButton = document.querySelector('.sign .sign-box .sign-btn');
        // const overlay = document.getElementById('overlay');
        const overlay = document.querySelector('.overlay')
        const closeButton = document.querySelector('.popup .popup-content .close');
        const popup = document.querySelector('.popup');

        // 监听登录按钮的点击事件
        loginButton.addEventListener('click', function () {
            // 显示遮罩层

            overlay.style.display = 'flex';

            popup.style.display = 'flex';

        });

        // 监听关闭按钮的点击事件
        closeButton.addEventListener('click', function () {
            // 隐藏遮罩层
            overlay.style.display = 'none';
            popup.style.display = 'none';
        });
    </script>
    <script src="js/sign.js"></script>
    <script src="https://fastly.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="js/renderData.js"></script>
    <script>
        //详细职位页面的left(导航栏)部分跳转

        //获取元素
        const careerListtab = document.querySelector('.everyCareerinfobox .left')
        careerListtab.addEventListener('click', function (e) {
            e.preventDefault()

            if (e.target.tagName === 'A') {

                if (e.target.dataset.id == 1) {
                    //跳转首页
                    //重新加载页面
                    location.href = 'recruitment.html'
                }
                else if (e.target.dataset.id == 2) {
                    //跳转职位列表
                    MainContent.style.display = 'none'
                    SearchCareerIndex.style.display = 'flex'
                    everyCareerbox.style.display = 'none'
                }
            }
        })
    </script>

    <script>
        //导航栏搜索框的搜索事件
        const careerSearchBox = document.querySelector('.search-box input')
        careerSearchBox.addEventListener('keyup', function (e) {
            if (e.key === 'Enter') {
                //获取所有的职位信息
                axios({
                    url: '/jobs/jobInfo/all',
                    method: 'post'
                }).then(result => {
                    const allcareers = result.data.data
                    //筛选数据
                    const filteredData = allcareers.filter(job => job.jobName.includes(careerSearchBox.value));
                    //渲染筛选后的数据
                    console.log(filteredData)
                    const newfliteredData = filteredData.map(item => {
                        return ` <div class="every-result">
                    <a href="">
                        <div class="info">
                            <div style="display: flex;justify-content: flex-start;align-items: center;">
                                 <span
                            style="margin-right: 4px;height: 20px;width:20px;text-align:center;font-size: 12px;color:rgb(251,100,100);background-color: rgb(255,227,227);line-height: 20px;border-radius:5px;">急</span>
                            <div class="name" data-id="${item.jobId}">${item.jobName}</div></div>
                            <div class="time">
                                <span>发布于 2024-11-15</span>
                            </div>
                        </div>
                    </a>
                </div>`
                    }).join("")
                    const fliterConditionInfo = document.querySelector('.fliter-condition-info')
                    fliterConditionInfo.innerHTML = `已选 0 条件 | ${filteredData.length} 结果 | 清除`

                    searchResultBox.innerHTML = newfliteredData
                    MainContent.style.display = 'none'
                    // app.style.display = 'none'
                    SearchCareerIndex.style.display = 'flex'
                    navBc.style.backgroundColor = '#DD4646'
                    everyCareerbox.style.display = 'none'
                    document.scrollingElement.scrollTop = 0

                })

                //渲染数据
                // 页面跳转
            }
        })
    </script>
</body>

</html>